<!DOCTYPE HTML>
<html lang="es">
<head>
<!-- Generated by javadoc (17) on Sat Dec 23 17:08:26 CET 2023 -->
<title>ImportCsvServiceImpl</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2023-12-23">
<meta name="description" content="declaration: package: com.espublico.importadorPedidos.service.impl, class: ImportCsvServiceImpl">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ImportCsvServiceImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.espublico.importadorPedidos.service.impl</a></div>
<h1 title="Class ImportCsvServiceImpl" class="title">Class ImportCsvServiceImpl</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.espublico.importadorPedidos.service.impl.ImportCsvServiceImpl</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../ImportCsvService.html" title="interface in com.espublico.importadorPedidos.service">ImportCsvService</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="annotations">@Service("importCsvService")
</span><span class="modifiers">public class </span><span class="element-name type-name-label">ImportCsvServiceImpl</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="../ImportCsvService.html" title="interface in com.espublico.importadorPedidos.service">ImportCsvService</a></span></div>
<div class="block">Servicio para importar datos de pedidos desde un archivo CSV y guardarlos en
 la base de datos.

 Esta clase proporciona la funcionalidad para procesar archivos CSV,
 transformar los datos en objetos DTO (Data Transfer Object) y luego convertir
 estos DTO en entidades para guardarlos en la base de datos. AdemÃ¡s, gestiona
 la creaciÃ³n de registros de historial asociados a cada importaciÃ³n para un
 seguimiento efectivo.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">ImportCsvServiceImpl</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getIdMaxHistoryOrder()" class="member-name-link">getIdMaxHistoryOrder</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Obtiene el identificador mÃ¡ximo de una orden histÃ³rica.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processCsvFile(java.io.BufferedReader)" class="member-name-link">processCsvFile</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/BufferedReader.html" title="class or interface in java.io" class="external-link">BufferedReader</a>&nbsp;reader)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Procesa un archivo CSV lÃ­nea por lÃ­nea y guarda los pedidos en la base de
 datos.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../model/PurchaseOrder.html" title="class in com.espublico.importadorPedidos.model">PurchaseOrder</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#savePurchaseOrder(com.espublico.importadorPedidos.model.PurchaseOrder,com.espublico.importadorPedidos.model.HistoryOrder)" class="member-name-link">savePurchaseOrder</a><wbr>(<a href="../../model/PurchaseOrder.html" title="class in com.espublico.importadorPedidos.model">PurchaseOrder</a>&nbsp;purchaseOrder,
 <a href="../../model/HistoryOrder.html" title="class in com.espublico.importadorPedidos.model">HistoryOrder</a>&nbsp;historyOrder)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Guarda un pedido de compra (PurchaseOrder) en la base de datos con una
 asociaciÃ³n a un historial especÃ­fico (HistoryOrder).</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>ImportCsvServiceImpl</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">ImportCsvServiceImpl</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="processCsvFile(java.io.BufferedReader)">
<h3>processCsvFile</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">processCsvFile</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/BufferedReader.html" title="class or interface in java.io" class="external-link">BufferedReader</a>&nbsp;reader)</span>
                            throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Procesa un archivo CSV lÃ­nea por lÃ­nea y guarda los pedidos en la base de
 datos.

 Este mÃ©todo lee un archivo CSV a travÃ©s de un BufferedReader, analiza cada
 lÃ­nea y transforma la informaciÃ³n en objetos PurchaseOrderDTO. Cada objeto
 DTO se valida y luego se convierte en una entidad PurchaseOrder para su
 persistencia en la base de datos. AdemÃ¡s, se asocia cada pedido con un
 registro Ãºnico de historial (HistoryOrder) que representa la importaciÃ³n de
 este conjunto de pedidos.

 El mÃ©todo crea inicialmente un nuevo HistoryOrder con la fecha y hora
 actuales para marcar el momento de la importaciÃ³n. Luego, procesa cada lÃ­nea
 del CSV, validando los campos y convirtiÃ©ndolos en PurchaseOrderDTO. Los DTO
 vÃ¡lidos se convierten en entidades PurchaseOrder, se les asigna el
 HistoryOrder comÃºn y se guardan en la base de datos. Los errores encontrados
 durante la validaciÃ³n se agregan a la lista 'errorMessages', que se retorna
 al final del proceso.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../ImportCsvService.html#processCsvFile(java.io.BufferedReader)">processCsvFile</a></code>&nbsp;in interface&nbsp;<code><a href="../ImportCsvService.html" title="interface in com.espublico.importadorPedidos.service">ImportCsvService</a></code></dd>
<dt>Parameters:</dt>
<dd><code>reader</code> - El BufferedReader que proporciona el contenido del archivo CSV.</dd>
<dt>Returns:</dt>
<dd>List<String> Una lista de mensajes de error que se generaron durante
         el proceso de validaciÃ³n de los datos del CSV.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - Si ocurre un error de entrada/salida al leer el archivo
                     CSV.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="savePurchaseOrder(com.espublico.importadorPedidos.model.PurchaseOrder,com.espublico.importadorPedidos.model.HistoryOrder)">
<h3>savePurchaseOrder</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../model/PurchaseOrder.html" title="class in com.espublico.importadorPedidos.model">PurchaseOrder</a></span>&nbsp;<span class="element-name">savePurchaseOrder</span><wbr><span class="parameters">(<a href="../../model/PurchaseOrder.html" title="class in com.espublico.importadorPedidos.model">PurchaseOrder</a>&nbsp;purchaseOrder,
 <a href="../../model/HistoryOrder.html" title="class in com.espublico.importadorPedidos.model">HistoryOrder</a>&nbsp;historyOrder)</span></div>
<div class="block">Guarda un pedido de compra (PurchaseOrder) en la base de datos con una
 asociaciÃ³n a un historial especÃ­fico (HistoryOrder). Este mÃ©todo asegura que
 la asociaciÃ³n entre el pedido de compra y su historial correspondiente sea
 mantenida correctamente en la base de datos.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>purchaseOrder</code> - El pedido de compra que se va a guardar. Este objeto
                      debe contener todos los datos relevantes del pedido que
                      se desea almacenar.</dd>
<dd><code>historyOrder</code> - El historial asociado con el pedido de compra. Este
                      historial representa un registro especÃ­fico en la tabla
                      de historial (order_history) al que se asocia el pedido
                      de compra.</dd>
<dt>Returns:</dt>
<dd>PurchaseOrder El objeto PurchaseOrder despuÃ©s de ser guardado en la
         base de datos. Esto incluye cualquier actualizaciÃ³n que haya ocurrido
         durante el proceso de guardado, como la generaciÃ³n del ID del pedido
         de compra.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getIdMaxHistoryOrder()">
<h3>getIdMaxHistoryOrder</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a></span>&nbsp;<span class="element-name">getIdMaxHistoryOrder</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../ImportCsvService.html#getIdMaxHistoryOrder()">ImportCsvService</a></code></span></div>
<div class="block">Obtiene el identificador mÃ¡ximo de una orden histÃ³rica. Este mÃ©todo puede ser
 utilizado para recuperar el identificador mÃ¡s alto registrado en la base de
 datos para las Ã³rdenes histÃ³ricas, lo cual es Ãºtil en diversas operaciones
 como asignar un nuevo identificador Ãºnico.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../ImportCsvService.html#getIdMaxHistoryOrder()">getIdMaxHistoryOrder</a></code>&nbsp;in interface&nbsp;<code><a href="../ImportCsvService.html" title="interface in com.espublico.importadorPedidos.service">ImportCsvService</a></code></dd>
<dt>Returns:</dt>
<dd>El valor mÃ¡ximo del identificador de una orden histÃ³rica.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
